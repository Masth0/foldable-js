/*! For license information please see 674.b06262dd.js.LICENSE.txt */
(self.webpackChunkfoldable_js=self.webpackChunkfoldable_js||[]).push([[674],{674:function(t,e){!function(t){"use strict";function e(t,e,s,n){return new(s||(s=Promise))((function(i,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}))}function s(t,e){var s,n,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],n=0}finally{s=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}var n,i;(function(t){t[t.Close=0]="Close",t[t.Open=1]="Open",t[t.Busy=2]="Busy"})(n||(n={})),function(t){t[t.Echap=27]="Echap",t[t.Tab=9]="Tab"}(i||(i={}));var r=function(t){var e=t||document.body,s=["a[href]","button","input","textarea","select","details > summary:first-of-type","video[controls]","audio[controls]",'[tabindex="0"]'].join(",");return[].slice.call(e.querySelectorAll(s)).filter((function(t){return t.getBoundingClientRect().width>0}))},o=function(){function t(t){this.container=t,this._focusables=r(this.container),this._keyHandler=this.handle.bind(this),this._lastElement=this._focusables[this._focusables.length-1],this._firstElement=this._focusables[0]}return t.prototype.handle=function(t){t.keyCode===i.Tab&&(t.shiftKey?document.activeElement===this._firstElement&&(t.preventDefault(),this._lastElement.focus()):document.activeElement===this._lastElement&&(t.preventDefault(),this._firstElement.focus()))},t.prototype.update=function(){this._focusables=r(this.container),this._lastElement=this._focusables[this._focusables.length-1],this._firstElement=this._focusables[0]},t.prototype.listen=function(){this.container.addEventListener("keydown",this._keyHandler)},t.prototype.dispose=function(){this.container.removeEventListener("keydown",this._keyHandler)},t}(),a=function(t){return Array.isArray(t)},l=function(t){return"string"==typeof t},u=function(t){return t instanceof NodeList},c=function(t){return!!t.nodeType};var h=function(){function t(r){var o,a,u,c=this;this._originalTrigger=void 0,this._escapeHandlerAdded=!1,this._eventListenersAdded=!1,this._options=Object.assign({},t.defaults,r),this._options.classes=Object.assign({},t.defaults.classes,r.classes),this._options.breakpoints=Object.assign({},t.defaults.breakpoints,r.breakpoints),this._status=this._options.statusByDefault,this._triggers=t.parseTriggersOptionsToArray(this._options.triggers),this._target=l(this._options.target)?document.querySelector(this._options.target):this._options.target,this._handler=function(t){return e(c,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return t.preventDefault(),this.status===this._options.statusByDefault&&(this._originalTrigger=t.target),[4,this.toggle()];case 1:return e.sent(),[2]}}))}))},this._clickOutside=function(t){return e(c,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return null===t.target?[3,2]:[4,this.clickOutsideHandler(t.target)];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},this._keyboardHandler=function(t){return e(c,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return t.stopPropagation(),t.keyCode!==i.Echap||this._status===this._options.statusByDefault?[3,2]:(t.preventDefault(),[4,this.toggle()]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},this._breakpointsHandler=(o=function(t){return e(c,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return this.isInBreakpointArea()?(this._eventListenersAdded||this.addTriggersEvents(),[3,4]):[3,1];case 1:return this._eventListenersAdded?[4,this.toggle()]:[3,3];case 2:t.sent(),this.removeTriggersEvents(),t.label=3;case 3:this.removeA11y(),t.label=4;case 4:return[2]}}))}))},a=300,function(){var t=arguments,e=this;clearTimeout(u),u=setTimeout((function(){o.apply(e,t)}),a)}),this._options.statusByDefault===n.Open&&(this._status=n.Close,this.toggle()),this.enable()}return Object.defineProperty(t.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"statusName",{get:function(){return n[this.status]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clickOutside",{set:function(t){this._options.enableClickOutside=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"focusTrap",{set:function(t){this._options.useFocusTrap=t},enumerable:!1,configurable:!0}),t.prototype.toggle=function(){var t;return e(this,void 0,void 0,(function(){var e=this;return s(this,(function(s){switch(s.label){case 0:if(this._status===n.Busy)return[2];switch(this._status){case n.Open:return[3,1];case n.Close:return[3,3]}return[3,5];case 1:return[4,this._close().then((function(){var t;e._status=n.Close,e.setClasses(),e.setA11y(),null===(t=e._originalTrigger)||void 0===t||t.focus()}))];case 2:case 4:return s.sent(),[3,5];case 3:return[4,this._open().then((function(){var t;e._status=n.Open,e.setClasses(),e.setA11y(),null===(t=e._target)||void 0===t||t.focus()}))];case 5:return this._status!==this._options.statusByDefault&&this._options.enableClickOutside&&document.documentElement.addEventListener("click",this._clickOutside),this._status!==this._options.statusByDefault&&this._options.useFocusTrap?this.enableFocusTrap():null===(t=this._focusTrap)||void 0===t||t.dispose(),[2]}}))}))},t.prototype._open=function(){return e(this,void 0,void 0,(function(){return s(this,(function(t){return this._status=n.Busy,this.setClasses(),[2,this._options.open.call(this,[this._triggers,this._target])]}))}))},t.prototype._close=function(){return e(this,void 0,void 0,(function(){return s(this,(function(t){return this._status=n.Busy,this.setClasses(),[2,this._options.close.call(this,[this._triggers,this._target])]}))}))},t.prototype.enable=function(){var t=this;null===this._options.breakpoints.min&&null===this._options.breakpoints.max||window.addEventListener("resize",this._breakpointsHandler),this.isInBreakpointArea()&&(this.addTriggersEvents(),this._triggers.forEach((function(e){e.classList.remove(t._options.classes.disabledClass)})),this._options.useFocusTrap&&this.enableFocusTrap())},t.prototype.disable=function(){var t=this;this.removeTriggersEvents(),this._triggers.forEach((function(e){e.classList.add(t._options.classes.disabledClass)})),window.removeEventListener("resize",this._breakpointsHandler)},t.prototype.enableFocusTrap=function(){void 0===this._focusTrap&&null!==this._target&&(this._focusTrap=new o(this._target)),this._focusTrap instanceof o&&null!==this._target&&(this._focusTrap.listen(),this._focusTrap.update())},t.prototype.disableFocusTrap=function(){this._focusTrap instanceof o&&(this._focusTrap.dispose(),this._focusTrap=void 0)},t.prototype.enableEscapeHandler=function(){var t;this._escapeHandlerAdded||(null===(t=this._target)||void 0===t||t.addEventListener("keyup",this._keyboardHandler),this._escapeHandlerAdded=!0)},t.prototype.disableEscapeHandler=function(){var t;this._escapeHandlerAdded&&(null===(t=this._target)||void 0===t||t.removeEventListener("keyup",this._keyboardHandler),this._escapeHandlerAdded=!1)},t.prototype.setA11y=function(){for(var t,e,s=this._status===n.Open,i=this._status===n.Close,r=0;r<this._triggers.length;r++)this._triggers[r].setAttribute("aria-expanded",s.toString());null===(t=this._target)||void 0===t||t.setAttribute("aria-hidden",i.toString()),null===(e=this._target)||void 0===e||e.setAttribute("tabindex",i?"-1":"0"),this.makeTabbable(s)},t.prototype.removeA11y=function(){for(var t,e,s=0;s<this._triggers.length;s++)this._triggers[s].removeAttribute("aria-expanded");null===(t=this._target)||void 0===t||t.removeAttribute("aria-hidden"),null===(e=this._target)||void 0===e||e.removeAttribute("tabindex")},t.prototype.makeTabbable=function(t){for(var e=null!==this._target?r(this._target):[],s=0;s<e.length;s++)e[s].setAttribute("tabindex",t?"0":"-1")},t.prototype.setClasses=function(){var t=this;switch(this._status){case n.Busy:this._triggers.forEach((function(e){e.classList.add(t._options.classes.busyClass)}));break;case n.Close:this._triggers.forEach((function(e){e.classList.remove(t._options.classes.busyClass),e.classList.remove(t._options.classes.openedClass),e.classList.add(t._options.classes.closedClass)}));break;case n.Open:this._triggers.forEach((function(e){e.classList.remove(t._options.classes.busyClass),e.classList.remove(t._options.classes.closedClass),e.classList.add(t._options.classes.openedClass)}))}},t.prototype.clickOutsideHandler=function(t){return e(this,void 0,void 0,(function(){var e,n=this;return s(this,(function(s){switch(s.label){case 0:if(null===t||this.isFoldableElement(t)||this._status===this._options.statusByDefault)return[3,2];for(e=t.parentElement;null!==e&&!this.isFoldableElement(e);)e=e.parentElement;return this.isFoldableElement(e)?[3,2]:[4,this.toggle()];case 1:s.sent(),document.documentElement.removeEventListener("click",n._clickOutside),s.label=2;case 2:return[2]}}))}))},t.prototype.addTriggersEvents=function(){var t,e=this;this._triggers.forEach((function(t){t.addEventListener(e._options.eventType,e._handler)})),this._options.statusByDefault===n.Close&&(null===(t=this._target)||void 0===t||t.addEventListener("keyup",this._keyboardHandler),this._escapeHandlerAdded=!0),this._eventListenersAdded=!0},t.prototype.removeTriggersEvents=function(){var t,e=this;this._triggers.forEach((function(t){t.removeEventListener(e._options.eventType,e._handler)})),this._escapeHandlerAdded&&(null===(t=this._target)||void 0===t||t.removeEventListener("keyup",this._keyboardHandler)),this._eventListenersAdded=!1},t.prototype.isInBreakpointArea=function(){var t=this._options.breakpoints.min,e=this._options.breakpoints.max,s=window.innerWidth;return null===t&&null===e||null!==t&&null===e&&s>=t||null===t&&null!==e&&s<=e||null!==t&&null!==e&&s>=t&&s<=e},t.prototype.isFoldableElement=function(t){return null!==t&&(-1!==this._triggers.indexOf(t)||t===this._target)},t.prototype.findOriginalTrigger=function(t){},t.parseTriggersOptionsToArray=function(t){return l(t)?[].slice.call(document.querySelectorAll(t)):c(t)?[t]:u(t)?[].slice.call(t):a(t)?function(){for(var t=0,e=0,s=arguments.length;e<s;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<s;e++)for(var r=arguments[e],o=0,a=r.length;o<a;o++,i++)n[i]=r[o];return n}(t):[]},t.defaults={triggers:[],target:"",breakpoints:{min:null,max:null},classes:{busyClass:"f_busy",closedClass:"f_closed",openedClass:"f_opened",disabledClass:"f_disabled"},eventType:"click",statusByDefault:0,enableClickOutside:!0,useFocusTrap:!1,open:function(){return e(void 0,void 0,void 0,(function(){return s(this,(function(t){return[2]}))}))},close:function(){return e(void 0,void 0,void 0,(function(){return s(this,(function(t){return[2]}))}))}},t}();t.Foldable=h,Object.defineProperty(t,"__esModule",{value:!0})}(e)}}]);